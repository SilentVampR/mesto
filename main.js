!function(){"use strict";var e={247:function(e,t,r){e.exports=r.p+"2fe2cc30155e40673176.jpg"},905:function(e,t,r){e.exports=r.p+"3a6cbd70274e5cf7a17e.jpg"},725:function(e,t,r){e.exports=r.p+"6d049f0781a876cc789b.jpg"},576:function(e,t,r){e.exports=r.p+"0d0678644cf4ad1508fb.jpg"},444:function(e,t,r){e.exports=r.p+"8210053964dc2f48c8b3.jpg"},894:function(e,t,r){e.exports=r.p+"84872c5086f8a83b82b3.jpg"}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.b=document.baseURI||self.location.href,function(){const e=[{name:"Воскресеновка",image:new URL(r(247),r.b)},{name:"Серышевский район",image:new URL(r(905),r.b)},{name:"Река Томь",image:new URL(r(725),r.b)},{name:"Небо над рекой Томь",image:new URL(r(576),r.b)},{name:"Ночной костёр",image:new URL(r(444),r.b)},{name:"Песчаный берег Томи",image:new URL(r(894),r.b)}],t={formSelector:".popup__form-container",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_state_not-valid",errorClass:"popup__text-error_state_not-valid",inputContainer:".popup__input-container",errorText:".popup__text-error",templateId:"#cardTemplate",profileNameSelector:".profile__name",profileAboutSelector:".profile__about",sectionCards:".cards"};class n{constructor({data:e,imageOpener:t},r){this._image=e.image,this._name=e.name,this._templateSelector=r,this._imageOpener=t,this._handlerLikeButtonClick=this._handlerLikeButtonClick.bind(this),this._handlerDeleteButtonClick=this._handlerDeleteButtonClick.bind(this),this._imageOpener=this._imageOpener.bind(this)}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",this._handlerLikeButtonClick),this._element.querySelector(".card__delete-button").addEventListener("click",this._handlerDeleteButtonClick),this._element.querySelector(".card__image").addEventListener("click",this._imageOpener)}_handlerLikeButtonClick(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handlerDeleteButtonClick(){this._element.remove(),this._element=null}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image");return e.src=this._image,e.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._element}}class s{constructor(e,t){this._formElement=t,this._settings=e,this._inputListArray=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._formButton=this._formElement.querySelector(this._settings.submitButtonSelector)}_toggleInputError(e,t){const r=e.closest(this._settings.inputContainer).querySelector(this._settings.errorText);t?(r.textContent=t,r.classList.add(this._settings.errorClass)):(r.textContent="",r.classList.remove(this._settings.errorClass))}hideInputErrors(){this._inputListArray.forEach((e=>{this._toggleInputError(e),this._changeButtonState()}))}_checkInputValidity(e){if(e.validity.valid)this._toggleInputError(e);else{const t=e.validationMessage;this._toggleInputError(e,t)}}_changeButtonState(){this._inputListArray.some((e=>!e.validity.valid))?(this._formButton.setAttribute("disabled",!0),this._formButton.classList.add(this._settings.inactiveButtonClass)):(this._formButton.removeAttribute("disabled",!0),this._formButton.classList.remove(this._settings.inactiveButtonClass))}_setEventListeners(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._changeButtonState(),this._inputListArray.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._changeButtonState()}))}))}enableValidation(){this._setEventListeners()}}class o{constructor(e){this._popup=document.querySelector(e),this._popupCloseButton=this._popup.querySelector(".popup__close-button"),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlayClose=this._handleOverlayClose.bind(this),this._close=this.close.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClose(e){e.target===e.currentTarget&&this.close()}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}setEventListeners(){this._popupCloseButton.addEventListener("click",this._close),this._popup.addEventListener("click",this._handleOverlayClose)}}class i extends o{constructor({formSelector:e,inputSelector:t,formSubmitCallback:r},n){super(n),this._formElement=this._popup.querySelector(e),this._formSubmitCallBack=r,this._inputArr=Array.from(this._formElement.querySelectorAll(t)),this._handleSubmit=this._handleSubmit.bind(this)}_getInputValues(){const e={};return this._inputArr.forEach((t=>e[t.name]=t.value)),e}_handleSubmit(e){e.preventDefault(),this._formSubmitCallBack(this._getInputValues()),this.close()}setEventListeners(){this._formElement.addEventListener("submit",this._handleSubmit),super.setEventListeners()}close(){super.close(),this._formElement.reset()}}const a=new class extends o{constructor(e){super(e)}open({data:e}){const t=this._popup.querySelector(".popup__image");t.src=e.image,t.alt=e.name,this._popup.querySelector(".popup__image-caption").textContent=e.name,super.open()}}(".popup_type_image-overlay");a.setEventListeners();const l=e=>{var r;u.addItem(new n({data:r=e,imageOpener:()=>{a.open({data:{name:r.name,image:r.image}})}},t.templateId).generateCard())},u=new class{constructor({items:e,renderer:t},r){this._items=e,this._renderer=t,this._container=document.querySelector(r)}renderItem(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:e,renderer:e=>{l(e)}},t.sectionCards);u.renderItem();const c=document.querySelector(".profile").querySelector(".profile__edit-button"),p=new class{constructor({profileNameSelector:e,profileAboutSelector:t}){this._userName=document.querySelector(e),this._userAbout=document.querySelector(t)}getUserInfo(){return{name:this._userName.textContent,about:this._userAbout.textContent}}setUserInfo(e){this._userName.textContent=e.profileAuthorName,this._userAbout.textContent=e.profileAuthorAbout}}({profileNameSelector:t.profileNameSelector,profileAboutSelector:t.profileAboutSelector}),_=new i({formSelector:t.formSelector,inputSelector:t.inputSelector,formSubmitCallback:e=>{p.setUserInfo(e)}},".popup_type_profile-edit"),h=new s(t,_._formElement);h.enableValidation(),_.setEventListeners(),c.addEventListener("click",(()=>{const{name:e,about:t}=p.getUserInfo();_._popup.querySelector(".popup__input_author_name").value=e,_._popup.querySelector(".popup__input_author_about").value=t,h.hideInputErrors(),_.open()}));const m=document.querySelector(".add-button"),d=new i({formSelector:t.formSelector,inputSelector:t.inputSelector,formSubmitCallback:e=>{l({image:e.placeUrl,name:e.placeName})}},".popup_type_new-place"),f=new s(t,d._formElement);f.enableValidation(),d.setEventListeners(),m.addEventListener("click",(()=>{f.hideInputErrors(),d.open()}))}()}();